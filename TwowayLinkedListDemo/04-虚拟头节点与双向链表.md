- #### è™šæ‹Ÿå¤´èŠ‚ç‚¹

å†å‰é¢çš„add(int index, E element)æˆ–è€…remove(int index)å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬é’ˆå¯¹index == 0çš„æƒ…å†µè¿›è¡Œäº†ç‰¹æ®Šå¤„ç†ï¼Œå› ä¸ºä¸€èˆ¬æ¥è®²ï¼Œåœ¨å¤´å°¾ä¸¤éƒ¨åˆ†çš„æ—¶å€™ï¼Œå¯èƒ½å­˜åœ¨ä¸€äº›ç‰¹æ®Šæƒ…å†µã€‚tip:æºç å‚ç…§SingleLinkedList2.java

æœ‰æ—¶å€™ä¸ºäº†è®©ä»£ç æ›´åŠ ç²¾ç®€ï¼Œç»Ÿä¸€æ‰€æœ‰èŠ‚ç‚¹çš„å¤„ç†é€»è¾‘ï¼Œå¯ä»¥å†æœ€å‰é¢å¢åŠ ä¸€ä¸ªè™šæ‹Ÿå¤´èŠ‚ç‚¹ï¼ˆä¸å­˜å‚¨æ•°æ®ï¼‰

åœ¨å‰é¢çš„é“¾è¡¨å½“ä¸­ï¼Œæˆ‘ä»¬æ˜¯ç›´æ¥å°†firstæŒ‡é’ˆæŒ‡å‘0çš„èŠ‚ç‚¹

![1566905748814](C:\Users\T\AppData\Roaming\Typora\typora-user-images\1566905748814.png)

ç°åœ¨æˆ‘ä»¬å¢åŠ ä¸€ä¸ªè™šæ‹Ÿå¤´èŠ‚ç‚¹ï¼Œæ¥æŒ‡å‘0çš„èŠ‚ç‚¹ï¼Œç„¶åè®©firstæŒ‡é’ˆæŒ‡å‘è™šæ‹Ÿçš„å¤´èŠ‚ç‚¹

![1566905982701](C:\Users\T\AppData\Roaming\Typora\typora-user-images\1566905982701.png)

éœ€è¦åšå¦‚ä¸‹çš„è°ƒæ•´

1. ä¸ºLinkedListå¢åŠ ä¸€ä¸ªæ„é€ æ–¹æ³•
   ```java
       public LinkedList() {
           first = new Node<>(null,null);
       }
   ```
   
2. è°ƒæ•´nodeæ–¹æ³•ï¼Œç”±äºæˆ‘ä»¬ä¹‹å‰æ˜¯ç›´æ¥é‡firstå¼€å§‹å–ï¼Œç°åœ¨æ”¹ä¸ºè™šæ‹Ÿå¤´èŠ‚ç‚¹åï¼Œåº”è¯¥é‡firstçš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹å¼€å§‹å–

   ```java
       private Node<E> node(int index) {
           rangeCheck(index);
           Node<E> node = first.next;
           for (int i = 0; i < index; i++) {
               node = node.next;
           }
           return node;
       }
   ```

3. ç”±äºç°åœ¨å¢åŠ è™šæ‹Ÿå¤´èŠ‚ç‚¹åï¼Œä¸º0èŠ‚ç‚¹ï¼Œå‰é¢åˆä¸€ä¸ªè™šæ‹Ÿå¤´èŠ‚ç‚¹ï¼Œå› æ­¤ï¼Œåœ¨add(int index, E element)ã€remove(int index)ç­‰å‡½æ•°ä¸­ï¼Œå°±ä¸éœ€è¦å¤„ç†index == 0 çš„æƒ…å†µï¼Œæºç æŸ¥çœ‹LinkedList2ç±»

**è¿™ç§æ–¹å¼ï¼Œä¸æ˜¯å¾ˆå¸¸è§ï¼Œä¹Ÿä¸æ˜¯å¾ˆæ¨èï¼Œä¸»è¦æ˜¯å¯¹å¤„ç†é—®é¢˜æ€è·¯çš„æ‹“å±•**

- #### å¤æ‚åº¦åˆ†æ

æˆ‘ä»¬æ¥é’ˆå¯¹å‰é¢ArrayListå’ŒLinkedListä¸¤ä¸ªç±»ä¸­ï¼ŒE get(int index)ã€void add(int index, E element)ã€E set(int index, E element)ã€E remove(int index)ã€E remove(int index)æ–¹æ³•è¿›è¡Œå¤æ‚åº¦çš„åˆ†æ

ArrayListä¸­**E get(int index)**

```java
    public E get(int index) {
        //å¯¹ç´¢å¼•è¿›è¡Œåˆ¤æ–­
        rangeCheck(index); //æ—¶é—´å¤æ‚åº¦O(1)
        return elements[index];//æ—¶é—´å¤æ‚åº¦O(1)
    }
```

E get(int index)çš„æ—¶é—´å¤æ‚åº¦ä¸ºO(1)

**E set(int index, E element)**

```java
    public E set(int index,E element) {
        rangeCheck(index);//æ—¶é—´å¤æ‚åº¦O(1)
        E old = elements[index];//æ—¶é—´å¤æ‚åº¦O(1)
        elements[index] = element;//æ—¶é—´å¤æ‚åº¦O(1)
        return old;
    }
```

E set(int index, E element)çš„æ—¶é—´å¤æ‚åº¦ä¸ºO(1)

**void add(int index, E element)**

```java
void add(int index, E element) {
        //å¯¹ç´¢å¼•è¿›è¡Œåˆ¤æ–­
       rangeCheckForAdd(index);//æ—¶é—´å¤æ‚åº¦O(1)
        //å¯¹æ•°ç»„è¿›è¡Œæ‰©å®¹
        ensureCapacity(size + 1);//æ—¶é—´å¤æ‚åº¦O(1)
    //åœ¨è¿™ä¸ªåœ°æ–¹ï¼Œæ•°æ®è§„æ¨¡ä¸ºsize
        for (int i = size - 1; i >= index; i--) {
            elements[i + 1] = elements[i];
        }
        elements[index] = element;
        size++;
    }
```

åœ¨addå‡½æ•°è¿™ä¸ªåœ°æ–¹ï¼Œæ•°æ®è§„æ¨¡ä¸ºsizeï¼Œå¹¶ä¸”ç”±äºå¤æ‚åº¦ä¸sizeå’Œindexæœ‰å…³ï¼Œå› æ­¤å°±å¤æ‚åº¦ä¼šæœ‰å¤šç§æƒ…å†µï¼Œå³ä¸‹æ–¹è¡¨ç¤ºçš„

> å¤æ‚åº¦ä¸€èˆ¬åˆ†ä¸ºä»¥ä¸‹å‡ ç§

- [ ] æœ€å¥½æƒ…å†µå¤æ‚åº¦

æœ€å¥½æƒ…å†µå°±æ˜¯åœ¨æœ€åæ·»åŠ å…ƒç´ ï¼Œè¿™ä¸ªæ—¶å€™ä¸éœ€è¦æ‰§è¡Œå¾ªç¯ï¼Œé‚£ä¹ˆå¤æ‚åº¦ä¸ºO(1)

- [ ] æœ€åæƒ…å†µå¤æ‚åº¦

æœ€åçš„æƒ…å†µæ˜¯åœ¨æœ€å‰é¢æ·»åŠ å…ƒç´ ï¼Œè¿™ä¸ªæ—¶å€™å¾ªç¯æ‰§è¡Œçš„æ¬¡æ•°ä¸ºæ•°æ®è§„æ¨¡ï¼Œé‚£ä¹ˆå¤æ‚åº¦ä¸ºO(n)

- [ ] å¹³å‡æƒ…å†µå¤æ‚åº¦

åœ¨æœ¬ä¾‹ä¸­ï¼Œç”±äºæƒ…å†µæ¯”è¾ƒç‰¹æ®Šï¼Œå‡è®¾ä¼ å…¥indexçš„æ¦‚ç‡éƒ½ä¸€æ ·æ—¶ï¼Œé‚£ä¹ˆindexçš„å¹³å‡å€¼ä¸ºï¼ˆ1 + 2 + 3 + . ... + nï¼‰/ n,é‚£ä¹ˆå¤æ‚åº¦ä¸ºO(n / 2) -> O(n)

**E remove(int index)**

```java
public E remove(int index) {
        rangeCheck(index);
        E old = elements[index];
        for (int i = index + 1; i <= size - 1; i++) {
            elements[i - 1] = elements[i];
        }
        elements[--size] = null;
    return old;
    }
```

åŒæ ·çš„ï¼Œåœ¨åˆ é™¤å…ƒç´ æ—¶ï¼Œä¹Ÿå­˜åœ¨æœ€å¥½å’Œæœ€åçš„æƒ…å†µï¼Œæœ€å¥½çš„æƒ…å†µå³ä¸ºåˆ é™¤æœ€åä¸€ä¸ªå…ƒç´ ï¼Œåˆ™å¤æ‚åº¦ä¸ºO(1)ï¼Œæœ€åå³ä¸ºåˆ é™¤æœ€å‰é¢çš„ä¸€ä¸ªå…ƒç´ ï¼Œåˆ™å¤æ‚åº¦ä¸ºO(n)ï¼Œå¹³å‡å¤æ‚åº¦ä¹Ÿä¸ºO(n)

æ¥ä¸‹æ¥æˆ‘ä»¬æ¥çœ‹LinkedListä¸­çš„**E get(int index)**

```java
    public E get(int index) {
        //è¯¥åœ°æ–¹çš„å¤æ‚åº¦å–å†³äºnode(int index)çš„å¤æ‚åº¦
        return node(index).element;
    }
```

é“¾è¡¨çš„ç»“æ„å¦‚ä¸‹æ‰€ç¤º

![1566310888924](C:\Users\T\AppData\Roaming\Typora\typora-user-images\1566310888924.png)

å› æ­¤åœ¨æŸ¥æ‰¾å…ƒç´ çš„æ—¶å€™ï¼Œéœ€è¦ä¸€ä¸ªä¸€ä¸ªçš„å¾€ä¸‹è¿›è¡Œéå†ï¼Œé‚£ä¹ˆå¤æ‚åº¦ä¹Ÿå°±å’ŒArrayListä¸­çš„E remove(int index)ç›¸åŒï¼Œå› æ­¤ï¼Œä¹Ÿå­˜åœ¨æœ€å¥½å’Œæœ€åçš„æƒ…å†µï¼Œæœ€å¥½çš„æƒ…å†µå³ä¸ºåˆ é™¤æœ€åä¸€ä¸ªå…ƒç´ ï¼Œåˆ™å¤æ‚åº¦ä¸ºO(1)ï¼Œæœ€åå³ä¸ºåˆ é™¤æœ€å‰é¢çš„ä¸€ä¸ªå…ƒç´ ï¼Œåˆ™å¤æ‚åº¦ä¸ºO(n)ï¼Œå¹³å‡å¤æ‚åº¦ä¹Ÿä¸ºO(n)

 **E set(int index, E element)** 

```java
    public E set(int index, E element) {
        Node<E> node = node(index);
        E old = node.element;
        node.element = element;
        return old;
    }
```

åœ¨set(int index, E element)é‡Œé¢ï¼Œä¹Ÿè°ƒç”¨äº†node(int index)ï¼Œé‚£ä¹ˆå¤æ‚åº¦å’ŒLinkedListä¸­çš„E get(int index)ç›¸åŒ

**void add(int index, E element)**

```java
 public void add(int index, E element) {
        rangeCheckForAdd(index);
        if (index == 0) {
          first =  new Node<E>(element,first);
        } else  {
            Node<E> prev = node(index - 1);
            prev.next = new Node<>(element,prev.next);
        }
        size++;
    }
```

å¯ä»¥çœ‹å‡ºï¼Œæœ€å¥½çš„æƒ…å†µä¸ºindex == 0çš„æƒ…å†µï¼Œæœ€åçš„æƒ…å†µï¼Œåˆ™æ˜¯æ‰¾åˆ°æœ€åä¸€ä¸ªå…ƒç´ ï¼Œå¤æ‚åº¦ä¸ºO(n)ï¼Œå¹³å‡å¤æ‚åº¦ä¹Ÿä¸ºO(n)

**E remove(int index)**

```java
    public E remove(int index) {
        rangeCheck(index);
        Node<E> node = first;
        if (index == 0) {
            first = first.next;
        } else  {
            Node<E> prev = node(index - 1);
            node = prev.next;
            prev.next = node.next;
        }
        size--;
        return node.element;
    }
```

åˆ é™¤èŠ‚ç‚¹çš„æƒ…å†µï¼Œæœ€ç»ˆä¹Ÿå’Œæ·»åŠ èŠ‚ç‚¹çš„æƒ…å†µä¸€æ ·ï¼Œå¤æ‚åº¦ç›¸åŒ

æ‰€ä»¥æœ€ç»ˆçš„ç»“æœä¸ºä¸‹å›¾

![1566992841371](C:\Users\T\AppData\Roaming\Typora\typora-user-images\1566992841371.png)

- #### åŠ¨æ€æ•°ç»„add(E element)å¤æ‚åº¦åˆ†æ

```java
    public void add(E element) {
        add(size,element);
    }
```

åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬çœ‹åˆ°ï¼Œæ°¸è¿œéƒ½æ˜¯åœ¨sizeçš„ä½ç½®è¿›è¡Œæ·»åŠ å…ƒç´ ï¼Œè¿™ç§æƒ…å†µä¸éœ€è¦æŒªåŠ¨å…ƒç´ ï¼Œé‚£ä¹ˆå¤æ‚åº¦ä¸ºO(1),ä¸è¿‡ä¹Ÿå­˜åœ¨æœ€åå¤æ‚åº¦çš„æƒ…å†µï¼Œå°±æ˜¯æ‰©å®¹çš„æ—¶å€™ï¼Œå³æ˜¯O(n)ï¼Œä½†æ˜¯ç»å¤§å¤šæ•°æƒ…å†µæ˜¯O(1),åˆ™å¹³å‡å¤æ‚åº¦å¯ä»¥è§†ä¸ºO(1)ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œçº¯åœ¨å‡æ‘Šå¤æ‚åº¦ï¼Œå…¶å‡æ‘Šå¤æ‚åº¦ä¸ºO(1)

åˆ†æ

å‡è®¾æ­¤æ—¶æœ‰ä¸€ä¸ªæ•°ç»„ï¼Œæœ€å¤§å®¹é‡ä¸º4ï¼Œé‚£ä¹ˆåœ¨å‰é¢4æ¬¡æ·»åŠ æ“ä½œæ—¶ï¼Œå¤æ‚åº¦å‡ä¸ºO(1)

![1566993703821](C:\Users\T\AppData\Roaming\Typora\typora-user-images\1566993703821.png)

ä½†æ˜¯å½“æˆ‘ä»¬ç»§ç»­å¾€ä¸‹æ·»åŠ çš„æ—¶å€™ï¼Œå°±ä¼šæ‰©å®¹ï¼Œåœ¨æ‰©å®¹æ—¶ï¼Œå¤æ‚åº¦ä¸ºO(4)

![1566993749648](C:\Users\T\AppData\Roaming\Typora\typora-user-images\1566993749648.png)

æ‰€ä»¥åœ¨æ­¤æ—¶ï¼Œæ‰©å®¹æ“ä½œçš„å¤æ‚åº¦å°±ä¼šå‡æ‘Šåˆ°å‰é¢4æ¬¡æ·»åŠ æ“ä½œä¸­å»ï¼Œåº”ä¸ºæ‰©å®¹ä¸å‰é¢çš„æ·»åŠ æ“ä½œå­˜åœ¨å…³ç³»

![1566993895040](C:\Users\T\AppData\Roaming\Typora\typora-user-images\1566993895040.png)

ç›¸å½“äºæ˜¯æ¯æ¬¡addæ“ä½œçš„æ¬¡æ•°ä¸º2ï¼Œé‚£ä¹ˆå¤æ‚åº¦è¿˜æ˜¯ä¸ºO(1)

- #### åŒå‘é“¾è¡¨

> æ­¤å‰æ‰€ä»‹ç»çš„é“¾è¡¨ï¼Œä¹Ÿå«åšå•å‘é“¾è¡¨
>
> ä½¿ç”¨åŒå‘é“¾è¡¨ï¼Œå¯ä»¥æå‡é“¾è¡¨çš„ç»¼åˆæ€§èƒ½

å†å‰é¢å•å‘é“¾è¡¨çš„æ—¶å€™ï¼Œç¤ºæ„å›¾æ˜¯è¿™æ ·çš„ã€‚tip:æºç å‚ç…§LinkedList.java

![1567824839951](C:\Users\T\AppData\Roaming\Typora\typora-user-images\1567824839951.png)

å•å‘é“¾è¡¨åªæœ‰ä¸€æ¡çº¿ï¼Œå½“å‰èŠ‚ç‚¹æŒ‡å‘çš„æ°¸è¿œæ˜¯å…¶ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼Œæ‰€ä»¥å…¶ç¼ºç‚¹æ˜¯åªèƒ½é‡å¤´éƒ¨å¾€åé¢æœç´¢

ç„¶è€ŒåŒå‘é“¾è¡¨ï¼Œå½“ä¸­æœ‰ä¸€ä¸ªæŒ‡å‘ä¸Šä¸€ä¸ªèŠ‚ç‚¹çš„æŒ‡é’ˆï¼Œå¯ä»¥é€šè¿‡ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼Œæ‰¾åˆ°ä¸Šä¸€ä¸ªèŠ‚ç‚¹ï¼Œå…¶ç¤ºæ„å›¾æ˜¯è¿™æ ·çš„

![1567825075829](C:\Users\T\AppData\Roaming\Typora\typora-user-images\1567825075829.png)

å¦‚æœå½“å‰èŠ‚ç‚¹ä¸ºå¤´èŠ‚ç‚¹ï¼Œåˆ™è¯¥èŠ‚ç‚¹çš„prevæŒ‡é’ˆæŒ‡å‘null

åŒæ ·çš„ï¼Œé“¾è¡¨å¯¹è±¡ä¸­ï¼Œå°±å¯¹åº”çš„å¤šäº†ä¸€ä¸ªlastæŒ‡é’ˆï¼Œè¯¥æŒ‡é’ˆæŒ‡å‘é“¾è¡¨çš„ä½èŠ‚ç‚¹ï¼Œé“¾è¡¨å¯¹è±¡å¦‚ä¸‹æ‰€ç¤º

![1567825194902](C:\Users\T\AppData\Roaming\Typora\typora-user-images\1567825194902.png)

æ•´ä¸ªé“¾è¡¨çš„ç¤ºæ„å›¾è¿™åº”è¯¥æ˜¯è¿™æ ·çš„

![1567825581248](C:\Users\T\AppData\Roaming\Typora\typora-user-images\1567825581248.png)

æœ‰äº†åŒå‘é“¾è¡¨ï¼Œé‚£ä¹ˆæˆ‘ä»¬æŸ¥æ‰¾å…ƒç´ å¯èƒ½ä¼šä»ä¸¤ä¸ªæ–¹å‘æ¥è¿›è¡Œæ“¦æ‰¾ï¼Œä¸€ä¸ªæ˜¯ä»å¤´èŠ‚ç‚¹å¼€å§‹æŸ¥æ‰¾ï¼Œä¸€ä¸ªæ˜¯ä»å°¾èŠ‚ç‚¹å¼€å§‹æ“¦æ‰¾

ğŸ¤”ä»€ä¹ˆæ—¶å€™ä»å·¦å¾€å³å¼€å§‹æ‰¾ï¼Œä»€ä¹ˆæ—¶å€™ä»å³å¾€å·¦å¼€å§‹æ‰¾ï¼Œå¦‚ä½•è¿›è¡Œåˆ¤æ–­ï¼Ÿ

**æŸ¥æ‰¾èŠ‚ç‚¹**

å¯ä»¥é€šè¿‡å®šä½èŠ‚ç‚¹çš„ç´¢å¼•ï¼Œé€šè¿‡sizeè¿›è¡Œåˆ¤æ–­ï¼Œåˆ¤æ–­æ–¹å¼å¦‚ä¸‹

```java
Node<E> node(int index) {
        rangeCheck(index);
        if (index < (size >> 1)) {
            //åœ¨å·¦è¾¹
            Node<E> node = first;
            for (int i = 0; i < index; i++) {
                node = node.next;
            }
            return node;
        } else {
            //åœ¨å³è¾¹
            Node<E> node = last;
            for (int i = size - 1; i > index; i--) {
                node = node.prev;
            }
            return node;
        }
    }
```

**æ¸…ç©ºé“¾è¡¨**

åœ¨å•å‘é“¾è¡¨æ—¶ï¼Œæˆ‘ä»¬æ¸…ç©ºèŠ‚ç‚¹æ˜¯ç›´æ¥å°†firstæŒ‡é’ˆç½®ä¸ºnullï¼Œé‚£æˆ‘ä»¬åœ¨åŒå‘é“¾è¡¨ä¸­ï¼Œå¦‚æœåŒæ ·çš„æŠŠlastç½®ä¸ºnullçš„è¯ï¼Œä¼šæœ‰é—®é¢˜å­˜åœ¨å—ï¼Ÿæˆ‘ä»¬å…ˆé€šè¿‡å›¾ç‰‡è¿›è¡Œåˆ†æï¼Œæ¸…ç©ºé“¾è¡¨çš„ä»£ç å¦‚ä¸‹

```java
public void clear() {
    size = 0;
    first = null;
    last = null;
}
```

é¦–å…ˆä¸€ä¸ªå®Œæ•´çš„é“¾è¡¨æ˜¯è¿™æ ·çš„

![1567825581248](C:\Users\T\AppData\Roaming\Typora\typora-user-images\1567825581248.png)

å½“æˆ‘ä»¬æŠŠfirstå’Œlastéƒ½ç½®ä¸ºnullä¹‹åï¼Œæ˜¯è¿™æ ·çš„

![1567827407159](C:\Users\T\AppData\Roaming\Typora\typora-user-images\1567827407159.png)

ç½®ç©ºä»¥åï¼Œå°±å­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼Œé‚£ä¹ˆé“¾è¡¨ä¸­çš„èŠ‚ç‚¹ä¼šè¢«é‡Šæ”¾æ‰å—ï¼Ÿå› ä¸ºæˆ‘ä»¬çœ‹åˆ°ï¼Œç°åœ¨æ¯ä¸ªèŠ‚ç‚¹ï¼Œéƒ½æœ‰æŒ‡é’ˆè¢«ä¸Šä¸€ä¸ªèŠ‚ç‚¹æˆ–è€…ä¸‹ä¸€ä¸ªèŠ‚ç‚¹å¼•ç”¨ç€ï¼Œå…¶å®åœ¨Javaå½“ä¸­ï¼Œè¿™ç§æƒ…å†µæ˜¯ä¼šè¢«é‡Šæ”¾çš„ï¼Œåº”ä¸ºåœ¨Javaè™šæ‹Ÿæœºå½“ä¸­ï¼Œå­˜åœ¨ä¸€ä¸ªgc rootå¯¹è±¡ï¼Œå‡¡æ˜¯æ²¡æœ‰è¢«gc rootå¯¹è±¡æ‰€å¼•ç”¨çš„å†…å­˜ï¼Œéƒ½ä¼šè¢«ç³»ç»Ÿå›æ”¶æ‰ã€‚

é‚£é—®é¢˜æ¥äº†ï¼Œ**ä»€ä¹ˆæ ·çš„å¯¹è±¡æ˜¯gc rootå¯¹è±¡å‘¢ï¼Ÿ**

åœ¨Javaä¸­ï¼Œåªè¦è¢«æ ˆç©ºé—´å¯¹è±¡æŒ‡å‘çš„å¯¹è±¡ï¼Œå±äºgc rootå¯¹è±¡ï¼Œç”±äºæˆ‘ä»¬åœ¨åˆ›å»ºé“¾è¡¨å¯¹è±¡æ˜¯æ˜¯é€šè¿‡è¿™ç§æ–¹å¼è¿›è¡Œåˆ›å»ºçš„

```java
List<Integer> list = new LinkedList<>();
```

å…¶ä¸­é€šè¿‡`new LinkedList<>()`åˆ›å»ºçš„å¯¹è±¡ï¼Œå…¶å†…å­˜åœ¨å †ç©ºé—´å½“ä¸­ï¼Œè€Œæ–¹æ³•å†…åˆ›å»ºçš„å±€éƒ¨å˜é‡`List<Integer> list`åœ¨æ ˆç©ºé—´ä¸­ï¼Œæ­¤æ—¶åœ¨æ ˆç©ºé—´çš„listå¼•ç”¨ç€`new LinkedList<>()`å†…å­˜åœ°å€ï¼Œé‚£ä¹ˆé€šè¿‡`new LinkedList<>()`åˆ›å»ºå‡ºæ¥çš„å¯¹è±¡ï¼Œå°±å«åšgc rootå¯¹è±¡ã€‚

çŸ¥é“ä»€ä¹ˆå«åšgc rootå¯¹è±¡ä»¥åï¼Œå½“æˆ‘ä»¬æ¸…ç©ºé“¾è¡¨æ—¶ï¼Œå°†firstå’Œlastå¼•ç”¨éƒ½ç½®ä¸ºnullä¹‹åï¼Œé“¾è¡¨èŠ‚ç‚¹å°±ä¸å†æœ‰gc rootå¯¹è±¡å¼•ç”¨ç€ï¼Œå› æ­¤èŠ‚ç‚¹çš„å†…å­˜å°±ä¼šè¢«ç³»ç»Ÿå›æ”¶æ‰ï¼Œè¿™å°±æ˜¯Javaè™šæ‹Ÿæœºçš„åšæ³•ã€‚

**é“¾è¡¨çš„æ·»åŠ  add(int index, E element)**

ç°åœ¨å¦‚ä¸‹çš„ä¸€ä¸ªåŒå‘é“¾è¡¨ï¼Œå‡è®¾æˆ‘ä»¬éœ€è¦åœ¨èŠ‚ç‚¹ä¸º2çš„åœ°æ–¹ï¼Œæ·»åŠ èŠ‚ç‚¹

![1567845965610](C:\Users\T\AppData\Roaming\Typora\typora-user-images\1567845965610.png)

æ·»åŠ è¿‡ç¨‹ä¸­çš„å¼•ç”¨å‘ç”Ÿäº†å¦‚ä¸‹å˜åŒ–

![1567846273387](C:\Users\T\AppData\Roaming\Typora\typora-user-images\1567846273387.png)

ä¸Šé¢è¿™ç§è¿‡ç¨‹ï¼Œé€šè¿‡ä»£ç è¡¨ç¤ºä¸º

```java
Node<E> next = node(index);
Node<E> prev = next.prev;
Node<E> node = new Node<>(prev,element,next);
prev.next = node;
next.prev = node;
```

ä¸è¿‡è¿™ç§æ·»åŠ æ˜¯æ¯”è¾ƒé€šç”¨çš„ä¸€ç§æƒ…å†µï¼Œé‚£ä¹ˆå‡è®¾æˆ‘ä»¬ç°åœ¨æ·»åŠ çš„ä½ç½®ä¸ºåºå·ä¸º0çš„ä½ç½®ï¼Œé‚£ä¹ˆåº”è¯¥åšç‰¹æ®Šçš„å¤„ç†ï¼Œåº”ä¸ºèŠ‚ç‚¹ä¸º0çš„prevä¸ºnullï¼Œå› æ­¤éœ€è¦ç‰¹æ®Šçš„å¤„ç†

é€šè¿‡ä»£ç è¡¨ç¤ºä¸º

```java
Node<E> next = node(index);
Node<E> prev = next.prev;
Node<E> node = new Node<>(prev,element,next);
next.prev = node;
if (prev == null) {
    first = node;
} else  {
    prev.next = node;
}
```

![1567847021486](C:\Users\T\AppData\Roaming\Typora\typora-user-images\1567847021486.png)

åŒæ ·çš„ï¼Œå¦‚æœå¾€æœ€æœ‰ä¸€ä¸ªä½ç½®æ·»åŠ å…ƒç´ ï¼Œåˆ™éœ€è¦ç‰¹æ®Šå¤„ç†ï¼Œå› æ­¤ç‰¹æ®Šå¤„ç†ä»£ç å¦‚ä¸‹

```java
Node<E> oldLast = last;
last = new Node<>(oldLast,element,null);
oldLast.next = last;
```

![1567847631345](C:\Users\T\AppData\Roaming\Typora\typora-user-images\1567847631345.png)

ä½†æ˜¯ï¼Œè¿™æ ·å†™ï¼Œè¿˜æ˜¯å­˜åœ¨é—®é¢˜ï¼Œå³ä¸ºé“¾è¡¨å½“ä¸­ä¸çº¯åœ¨ä»»ä½•èŠ‚ç‚¹çš„æ—¶å€™ï¼Œ`Node<E> oldLast = last;`ä¸ºnullï¼Œè¿™ç§æƒ…å†µéœ€è¦ç‰¹ä¿—å¤„ç†ï¼Œä»£ç ä¸º

```java
Node<E> oldLast = last;
last = new Node<>(oldLast,element,null);
if (oldLast == null) {
    first = last;
} else  {
    oldLast.next = last;
}
```

![1567847970263](C:\Users\T\AppData\Roaming\Typora\typora-user-images\1567847970263.png)

å®Œæ•´çš„ä»£ç é€»è¾‘æ˜¯è¿™æ ·çš„

```java
public void add(int index, E element) {
        rangeCheckForAdd(index);
        if (index == size) {
            Node<E> oldLast = last;
            last = new Node<>(oldLast,element,null);
            if (oldLast == null) {
                first = last;
            } else  {
                oldLast.next = last;
            }
        } else  {
            Node<E> next = node(index);
            Node<E> prev = next.prev;
            Node<E> node = new Node<>(prev,element,next);
            next.prev = node;
            if (prev == null) {
                first = node;
            } else  {
                prev.next = node;
            }
        }
        size++;
    }
```

**é“¾è¡¨çš„åˆ é™¤ E remove(int index)**

åŒæ ·çš„ï¼Œå‡è®¾ç°åœ¨æœ‰å¦‚ä¸‹çš„é“¾è¡¨ï¼Œæˆ‘ä»¬æƒ³è¦åˆ é™¤ä¸‹æ ‡ä¸º2çš„èŠ‚ç‚¹

![1567848382053](C:\Users\T\AppData\Roaming\Typora\typora-user-images\1567848382053.png)

é¦–å…ˆæˆ‘ä»¬æ‰¾åˆ°å³å°†è¢«åˆ é™¤çš„èŠ‚ç‚¹ï¼Œæˆ‘ä»¬å°†å³å°†è¢«åˆ é™¤èŠ‚ç‚¹çš„ä¸Šä¸€ä¸ªèŠ‚ç‚¹ä¸­çš„nextæŒ‡å‘è¢«åˆ é™¤èŠ‚ç‚¹çš„nextï¼Œè¢«åˆ é™¤èŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„prevæŒ‡å‘è¢«åˆ é™¤èŠ‚ç‚¹çš„prevï¼Œé€šè¿‡å›¾ç¤ºè¡¨ç¤ºä¸º

![1567848579979](C:\Users\T\AppData\Roaming\Typora\typora-user-images\1567848579979.png)

é€šè¿‡è¿™æ ·ä¿®æ”¹ä»¥åï¼Œnodeä¸º2çš„èŠ‚ç‚¹ï¼Œå°±ä»é“¾è¡¨ä¸­æˆåŠŸçš„åˆ é™¤ï¼Œå¹¶ä¸”è¯¥èŠ‚ç‚¹ä¸å†æœ‰å¼•ç”¨æŒ‡å‘å®ƒï¼Œå…¶å†…å­˜æœ€ç»ˆè¢«ç³»ç»Ÿå›æ”¶

![1567848684927](C:\Users\T\AppData\Roaming\Typora\typora-user-images\1567848684927.png)

ä»£ç è¡¨ç¤ºä¸ºï¼š

```java
public E remove(int index) {
        rangeCheck(index);
        Node<E> node = node(index);
        Node<E> prev = node.prev;
        Node<E> next = node.next;
        if (prev == null) {//ç­‰ä»·äºindex == 0
            first = next;
        } else  {
            prev.next = next;
        }
        if (next == null) {//ç­‰ä»·äºindex == size - 1
            last = prev;
        } else  {
            next.prev = prev;
        }
        size--;
        return node.element;
    }
```



#### åŒå‘é“¾è¡¨ VS å•å‘é“¾è¡¨

![1567850759251](C:\Users\T\AppData\Roaming\Typora\typora-user-images\1567850759251.png)

#### åŒå‘é“¾è¡¨ VS åŠ¨æ€æ•°ç»„

> åŠ¨æ€æ•°ç»„
>
> - å¼€è¾Ÿã€é”€æ¯å†…å­˜ç©ºé—´çš„æ¬¡æ•°ç›¸å¯¹è¾ƒå°‘ï¼Œä½†æ˜¯å¯èƒ½é€ æˆå†…å­˜ç©ºé—´çš„æµªè´¹(å¯ä»¥é€šè¿‡ç¼©å®¹è§£å†³)

> åŒå‘é“¾è¡¨
>
> - å¼€è¾Ÿã€é”€æ¯å†…å­˜ç©ºé—´çš„æ¬¡æ•°ç›¸å¯¹è¾ƒå¤šï¼Œä½†ä¸ä¼šé€ æˆå†…å­˜ç©ºé—´çš„æµªè´¹

- å¦‚æœé¢‘ç¹åœ¨**å°¾éƒ¨**è¿›è¡Œ**æ·»åŠ **ã€**åˆ é™¤**æ“ä½œï¼Œ**åŠ¨æ€æ•°ç»„**ã€**åŒå‘é“¾è¡¨**å‡å¯é€‰æ‹©
- å¦‚æœé¢‘ç¹åœ¨**å¤´éƒ¨**è¿›è¡Œ**æ·»åŠ **ã€**åˆ é™¤**æ“ä½œï¼Œ å»ºè®®é€‰æ‹©ä½¿ç”¨**åŒå‘é“¾è¡¨**
- å¦‚æœæœ‰é¢‘ç¹çš„(åœ¨ä»»æ„ä½ç½®)è¿›è¡Œ**æ·»åŠ **ã€**åˆ é™¤**æ“ä½œï¼Œ å»ºè®®é€‰æ‹©ä½¿ç”¨**åŒå‘é“¾è¡¨**
- å¦‚æœæœ‰é¢‘ç¹çš„**æŸ¥è¯¢**æ“ä½œ(éšæœºè®¿é—®æ“ä½œ)ï¼Œå»ºè®®é€‰æ‹©ä½¿ç”¨**åŠ¨æ€æ•°ç»„**

>  ä¸è¿‡ï¼Œçœ‹åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬ä¸ç¦æœ‰ç–‘é—®ï¼Œæœ‰äº†åŒå‘é“¾è¡¨ï¼Œå•å‘é“¾è¡¨æ˜¯å¦å°±æ²¡æœ‰ä»»ä½•ç”¨å¤„äº†å‘¢ï¼Ÿ

å¹¶éå¦‚æ­¤ï¼Œåœ¨å“ˆå¸Œè¡¨ä¸­çš„è®¾è®¡å°±ç”¨åˆ°äº†å•å‘é“¾è¡¨ï¼Œè‡³äºåŸå› ï¼Œæˆ‘ä¼šåœ¨å“ˆå¸Œè¡¨ç« èŠ‚ä¸­è¯¦ç»†è¯´æ˜ã€‚